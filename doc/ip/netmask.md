http://stackoverflow.com/questions/7021745/how-to-determine-whether-two-ip-addresses-belong-to-the-same-network-segment